{{ $logo := resources.Get "images/logo.jpg" }}
{{ $logo := $logo.Process "resize 64x64" }}
{{ $alt := "un dessin carr√© de la devanture d'une vieille droguerie, logo du site" }}

<!-- Menu pour md et plus -->
<nav class="hidden  md:flex bg-mycolor-300 list-none  text-xl font-bold   space-x-12  h-16 sticky top-0 z-50"  x-data="{ open: false }" >
    
    <a class="" href="/"><img class="" src="{{ $logo.RelPermalink }}" alt="{{ $alt }}"></a>
    
      {{ range .Site.Menus.main }}
        
        <li class="hover:scale-110 pt-4">
          <a class="no-underline hover:text-myred " href="{{ .URL }}">{{ .Name }}</a>
        
          {{ if .HasChildren }} 
          <svg @click="open = ! open" :class="{'rotate-180': open, 'rotate-0': !open}"      fill="currentColor" viewBox="0 0 20 20"  class="inline w-4 h-4 "><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>

          <ul class=" list-none text-mywhite text-left border-t border-mywhite pt-4" x-show="open" >
            {{ range .Children }}
              <li><a class="no-underline hover:text-mycolor-500 hover:italic" href="{{ .URL }}">{{ .Name }}</a></li>
            {{ end }}
          </ul>
        
            {{ end }}
          </li>

      {{ end }}
   
</nav>

<!-- pour les portables et sm -->
<nav class="md:hidden bg-mycolor-300 list-none " x-data="{ open: false }">
<div id="en-tete" class="flex justify-between items-center ">
  <div class="flex items-center">    
    <a class="" href="/"><img class="h-12" src="{{ $logo.RelPermalink }}"></a>
    <span class="text-lg text-mycolor-500 font-bold pl-4">LA FABRIQUE</span>
  </div>

  <svg @click="open = !open" fill="white" viewBox="0 0 20 20" class="h-10">
    <path x-show="!open" fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM9 15a1 1 0 011-1h6a1 1 0 110 2h-6a1 1 0 01-1-1z" clip-rule="evenodd"></path>
    <path x-show="open" fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
  </svg>
</div>
  <div id="hugo-menu" class="flex-col bg-mycolor-600 text-mycolor-100 text-lg" x-show="open" x-data="{ open_child: false }">
    {{ range .Site.Menus.main }}
      <li class="py-1 pl-2" @mouseleave="open_child = false" >
        <a class="no-underline hover:italic" href="{{ .URL }}">{{ .Name }}</a>

        <!-- Dropdown -->
        {{ if .HasChildren }}
        <svg  id="svg-child" @mouseover="open_child = true" fill="currentColor" viewBox="0 0 20 20"  class="inline w-4 h-4"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
        <ul id="ul-child" class="list-none"  x-show="open_child" >
          {{ range .Children }}
            <li class="pl-2 text-mycolor-400 hover:text-mywhite hover:italic" ><a class="no-underline" href="{{ .URL }}" >{{ .Name }}</a></li>
          {{ end }}
        </ul>
        {{ end }}

      </li>
    {{ end }}
  </div>

</nav>
